'use client';

import { motion } from 'framer-motion';
import { CSSProperties } from 'react';

interface BotProps {
  className?: string;
  size?: number;
  maxWidth?: string;
  errorText?: string;
  textClassName?: string;
  animationDuration?: number;
}

// SVG viewBox dimensions from bot.svg
const VIEWBOX = {
  width: 256,
  height: 256,
} as const;

// Chest panel dimensions - the dark blue rectangular area on the robot's chest
// Based on path: M87.336 146.606v-25.901 (meaning top is at 120.705, bottom at 146.606)
const CHEST_PANEL = {
  left: 87.336,
  right: 168.663,
  top: 120.705,
  bottom: 146.606,
  width: 81.327,
  height: 25.901,
} as const;

// Calculate exact center of the chest panel
const TEXT_POSITION = {
  x: (CHEST_PANEL.left + CHEST_PANEL.right) / 2,  // Horizontal center
  y: (CHEST_PANEL.top + CHEST_PANEL.bottom) / 2,  // Vertical center
} as const;

// Animation configuration
const DEFAULT_ANIMATION = {
  duration: 1.5,
  opacity: [1, 0.3, 1] as number[],
  ease: "easeInOut" as const,
};

export function Bot({ 
  className = '', 
  size, 
  maxWidth = '100%', 
  errorText = 'ERROR!',
  textClassName,
  animationDuration = DEFAULT_ANIMATION.duration
}: BotProps) {
  // Calculate SVG props based on size or responsive width
  const svgProps = size 
    ? { width: size, height: size }
    : { width: '100%', height: 'auto', style: { maxWidth } as CSSProperties };

  // Animation configuration for text
  const animationProps = {
    animate: { opacity: DEFAULT_ANIMATION.opacity },
    transition: {
      duration: animationDuration,
      repeat: Infinity,
      ease: DEFAULT_ANIMATION.ease,
    }
  };

  return (
    <svg 
      {...svgProps}
      viewBox={`0 0 ${VIEWBOX.width} ${VIEWBOX.height}`} 
      fill="none" 
      xmlns="http://www.w3.org/2000/svg"
      className={`bot-simple-svg ${className}`}
      preserveAspectRatio="xMidYMid meet"
    >
      <style>{`
        .st0{fill:#4671c6}
        .st2{fill:#f9a7a7}
        .st3{fill:#a4c9ff}
        .st4{fill:#3762cc}
        .st5{fill:#e0ebfc}
        .st6{fill:#6bdddd}
        .error-text{
          fill:#ffffff;
          font-family: system-ui, -apple-system, sans-serif;
          font-weight: bold;
        }
      `}</style>
      
      {/* Head */}
      <path className="st3" d="M182.364 88.656H73.636a5.931 5.931 0 0 1-5.931-5.931V25.792C67.706 15.966 75.672 8 85.498 8h85.005c9.826 0 17.792 7.966 17.792 17.792v56.933a5.932 5.932 0 0 1-5.931 5.931z"/>
      
      {/* Face/visor */}
      <path className="st0" d="M87.87 64.774V39.866a9.489 9.489 0 0 1 9.489-9.489h61.282a9.489 9.489 0 0 1 9.489 9.489v24.908a5.931 5.931 0 0 1-5.931 5.931H93.801a5.93 5.93 0 0 1-5.931-5.931z"/>
      
      {/* Side panels */}
      <path className="st2" d="M67.706 76.004H55.252a7.117 7.117 0 0 1-7.117-7.117V35.281a7.117 7.117 0 0 1 7.117-7.117h12.454v47.84zM188.294 28.164h12.454a7.117 7.117 0 0 1 7.117 7.117v33.607a7.117 7.117 0 0 1-7.117 7.117h-12.454V28.164zM101.934 88.656h52.131v9.18h-52.131z"/>
      
      {/* Body/Breastplate - Main chest area */}
      <path className="st3" d="M177.516 201.61H78.484c-5.976 0-10.82-4.844-10.82-10.82v-82.135c0-5.976 4.844-10.82 10.82-10.82h99.032c5.976 0 10.82 4.844 10.82 10.82v82.135c-.001 5.976-4.845 10.82-10.82 10.82z"/>
      
      {/* Chest panel - darker blue area where text will go */}
      <path className="st0" d="M87.336 146.606v-25.901a4.918 4.918 0 0 1 4.918-4.918h71.491a4.918 4.918 0 0 1 4.918 4.918v25.901a4.918 4.918 0 0 1-4.918 4.918H92.254a4.918 4.918 0 0 1-4.918-4.918z"/>
      
      {/* Arms */}
      <path className="st2" d="M195.213 153.574h-6.878v-39.836h6.878a5.902 5.902 0 0 1 5.902 5.902v28.033a5.901 5.901 0 0 1-5.902 5.901z"/>
      <path className="st2" d="M60.787 153.574h6.878v-39.836h-6.878a5.902 5.902 0 0 0-5.902 5.902v28.033a5.902 5.902 0 0 0 5.902 5.901z"/>
      
      {/* Shoulders */}
      <path className="st5" d="M225.336 123.082h-24.221v20.902h10.008c.923 0 1.672.749 1.672 1.672v21.633h20.902v-35.846a8.361 8.361 0 0 0-8.361-8.361z"/>
      <path className="st5" d="M30.664 123.082h24.221v20.902H44.877c-.923 0-1.672.749-1.672 1.672v21.633H22.303v-35.846a8.361 8.361 0 0 1 8.361-8.361z"/>
      
      {/* Hands */}
      <path className="st3" d="M204.016 172.305v22.957a2.508 2.508 0 0 0 2.508 2.508h6.477a2.508 2.508 0 0 0 2.508-2.508v-13.098a2.508 2.508 0 0 1 2.508-2.508h10.455a2.508 2.508 0 0 1 2.508 2.508v13.098a2.508 2.508 0 0 0 2.508 2.508h6.477a2.508 2.508 0 0 0 2.508-2.508v-22.957a5.016 5.016 0 0 0-5.016-5.016h-28.426a5.015 5.015 0 0 0-5.015 5.016z"/>
      <path className="st3" d="M51.984 172.305v22.957a2.508 2.508 0 0 1-2.508 2.508h-6.477a2.508 2.508 0 0 1-2.508-2.508v-13.098a2.508 2.508 0 0 0-2.508-2.508H27.527a2.508 2.508 0 0 0-2.508 2.508v13.098a2.508 2.508 0 0 1-2.508 2.508h-6.477a2.508 2.508 0 0 1-2.508-2.508v-22.957a5.016 5.016 0 0 1 5.016-5.016h28.426a5.016 5.016 0 0 1 5.016 5.016z"/>
      
      {/* Feet */}
      <path className="st3" d="M180.541 248h-46.066a1.967 1.967 0 0 1-1.967-1.967v-8.525a3.934 3.934 0 0 1 3.934-3.934h42.131a3.934 3.934 0 0 1 3.934 3.934v8.525a1.966 1.966 0 0 1-1.966 1.967z"/>
      <path className="st5" d="M145.213 214.39h24.59v19.184h-24.59z"/>
      <path className="st3" d="M121.525 248H75.459a1.967 1.967 0 0 1-1.967-1.967v-8.525a3.934 3.934 0 0 1 3.934-3.934h42.131a3.934 3.934 0 0 1 3.934 3.934v8.525a1.966 1.966 0 0 1-1.966 1.967z"/>
      <path className="st5" d="M86.197 214.39h24.59v19.184h-24.59z"/>
      
      {/* Leg joints */}
      <path className="st2" d="M137.59 208.488v-6.878h39.836v6.878a5.902 5.902 0 0 1-5.902 5.902h-28.033a5.902 5.902 0 0 1-5.901-5.902zM78.574 208.488v-6.878h39.836v6.878a5.902 5.902 0 0 1-5.902 5.902H84.475a5.902 5.902 0 0 1-5.901-5.902z"/>
      
      {/* Eyes */}
      <path className="st6" d="M105.541 61.975a6.066 6.066 0 0 1-6.066-6.066v-8.525a6.066 6.066 0 0 1 12.132 0v8.525a6.066 6.066 0 0 1-6.066 6.066zM149.803 61.975a6.066 6.066 0 0 1-6.066-6.066v-8.525a6.066 6.066 0 0 1 12.132 0v8.525a6.066 6.066 0 0 1-6.066 6.066z"/>
      
      {/* Outlines - all the st4 paths */}
      <path className="st4" d="M182.363 90.655H73.637c-4.373 0-7.931-3.558-7.931-7.93V25.792C65.706 14.879 74.585 6 85.498 6h85.004c10.913 0 19.792 8.879 19.792 19.792v56.934c0 4.372-3.558 7.929-7.931 7.929zM85.498 10c-8.708 0-15.792 7.084-15.792 15.792v56.934a3.935 3.935 0 0 0 3.931 3.93h108.727a3.935 3.935 0 0 0 3.931-3.93V25.792c0-8.708-7.084-15.792-15.792-15.792H85.498z"/>
      <path className="st4" d="M162.199 72.705H93.801c-4.373 0-7.931-3.558-7.931-7.931V39.866c0-6.335 5.154-11.489 11.489-11.489h61.281c6.335 0 11.489 5.154 11.489 11.489v24.908c.001 4.373-3.557 7.931-7.93 7.931zm-64.84-40.328c-4.13 0-7.489 3.359-7.489 7.489v24.908a3.936 3.936 0 0 0 3.931 3.931h68.398a3.936 3.936 0 0 0 3.931-3.931V39.866c0-4.13-3.359-7.489-7.489-7.489H97.359zM67.706 78.004H55.252c-5.027 0-9.117-4.09-9.117-9.117V35.28c0-5.026 4.09-9.116 9.117-9.116h12.454a2 2 0 0 1 2 2v47.84a2 2 0 0 1-2 2zm-12.454-47.84a5.123 5.123 0 0 0-5.117 5.116v33.606a5.123 5.123 0 0 0 5.117 5.117h10.454v-43.84H55.252zM200.748 78.004h-12.454a2 2 0 0 1-2-2v-47.84a2 2 0 0 1 2-2h12.454c5.027 0 9.117 4.09 9.117 9.116v33.606c0 5.028-4.09 9.118-9.117 9.118zm-10.454-4h10.454a5.123 5.123 0 0 0 5.117-5.117V35.28a5.123 5.123 0 0 0-5.117-5.116h-10.454v43.84zM154.065 99.836h-52.131a2 2 0 0 1-2-2v-9.181a2 2 0 0 1 2-2h52.131a2 2 0 0 1 2 2v9.181a2 2 0 0 1-2 2zm-50.13-4h48.131v-5.181h-48.131v5.181z"/>
      <path className="st4" d="M177.516 203.61H78.484c-7.069 0-12.82-5.751-12.82-12.819v-82.136c0-7.068 5.751-12.819 12.82-12.819h99.031c7.069 0 12.82 5.751 12.82 12.819v82.136c.001 7.068-5.75 12.819-12.819 12.819zM78.484 99.836c-4.863 0-8.82 3.956-8.82 8.819v82.136c0 4.863 3.957 8.819 8.82 8.819h99.031c4.863 0 8.82-3.956 8.82-8.819v-82.136c0-4.863-3.957-8.819-8.82-8.819H78.484z"/>
      <path className="st4" d="M195.213 155.574h-6.877a2 2 0 0 1-2-2v-39.837a2 2 0 0 1 2-2h6.877c4.357 0 7.902 3.545 7.902 7.902v28.032c0 4.358-3.545 7.903-7.902 7.903zm-4.877-4h4.877a3.907 3.907 0 0 0 3.902-3.902V119.64a3.907 3.907 0 0 0-3.902-3.902h-4.877v35.836zM239.967 199.771h-6.477a4.514 4.514 0 0 1-4.509-4.509v-13.098a.51.51 0 0 0-.508-.509h-10.455a.51.51 0 0 0-.509.509v13.098a4.514 4.514 0 0 1-4.508 4.509h-6.478a4.514 4.514 0 0 1-4.508-4.509v-22.957a7.025 7.025 0 0 1 7.017-7.017h28.426a7.025 7.025 0 0 1 7.017 7.017v22.957a4.513 4.513 0 0 1-4.508 4.509zm-21.948-22.116h10.455a4.514 4.514 0 0 1 4.508 4.509v13.098c0 .28.229.509.509.509h6.477a.51.51 0 0 0 .509-.509v-22.957a3.021 3.021 0 0 0-3.017-3.017h-28.426a3.021 3.021 0 0 0-3.017 3.017v22.957c0 .28.228.509.508.509h6.478a.51.51 0 0 0 .508-.509v-13.098a4.512 4.512 0 0 1 4.508-4.509zM67.664 155.574h-6.877c-4.357 0-7.902-3.545-7.902-7.902V119.64c0-4.357 3.545-7.902 7.902-7.902h6.877a2 2 0 0 1 2 2v39.837a2 2 0 0 1-2 1.999zm-6.877-39.837a3.907 3.907 0 0 0-3.902 3.902v28.032a3.907 3.907 0 0 0 3.902 3.902h4.877v-35.837h-4.877z"/>
      <path className="st4" d="M233.696 169.288h-20.901a2 2 0 0 1-2-2v-21.305h-9.68a2 2 0 0 1-2-2v-20.901a2 2 0 0 1 2-2h24.221c5.713 0 10.36 4.647 10.36 10.36v35.846a2 2 0 0 1-2 2zm-18.901-4h16.901v-33.846a6.368 6.368 0 0 0-6.36-6.36h-22.221v16.901h8.008a3.677 3.677 0 0 1 3.672 3.673v19.632zM49.476 199.771h-6.478a4.514 4.514 0 0 1-4.508-4.509v-13.098a.51.51 0 0 0-.509-.509H27.526a.51.51 0 0 0-.508.509v13.098a4.514 4.514 0 0 1-4.509 4.509h-6.477a4.514 4.514 0 0 1-4.509-4.509v-22.957a7.025 7.025 0 0 1 7.017-7.017h28.426a7.025 7.025 0 0 1 7.017 7.017v22.957a4.513 4.513 0 0 1-4.507 4.509zm-21.95-22.116h10.455a4.514 4.514 0 0 1 4.509 4.509v13.098c0 .28.228.509.508.509h6.478a.51.51 0 0 0 .508-.509v-22.957a3.021 3.021 0 0 0-3.017-3.017H18.541a3.021 3.021 0 0 0-3.017 3.017v22.957c0 .28.229.509.509.509h6.477a.51.51 0 0 0 .509-.509v-13.098a4.513 4.513 0 0 1 4.507-4.509z"/>
      <path className="st4" d="M43.205 169.288H22.304a2 2 0 0 1-2-2v-35.846c0-5.713 4.647-10.36 10.36-10.36h24.221a2 2 0 0 1 2 2v20.901a2 2 0 0 1-2 2h-9.68v21.305a2 2 0 0 1-2 2zm-18.901-4h16.901v-19.632a3.677 3.677 0 0 1 3.672-3.673h8.008v-16.901H30.664a6.368 6.368 0 0 0-6.36 6.36v33.846zM180.541 250h-46.065a3.972 3.972 0 0 1-3.968-3.967v-8.525a5.942 5.942 0 0 1 5.935-5.934h42.132a5.941 5.941 0 0 1 5.934 5.934v8.525a3.972 3.972 0 0 1-3.968 3.967zm0-4v2-2zm-44.099-10.426a1.937 1.937 0 0 0-1.935 1.934v8.525l46-.033v-8.492a1.936 1.936 0 0 0-1.934-1.934h-42.131z"/>
      <path className="st4" d="M169.804 235.574h-24.591a2 2 0 0 1-2-2V214.39a2 2 0 0 1 2-2h24.591a2 2 0 0 1 2 2v19.185a2 2 0 0 1-2 1.999zm-22.591-4h20.591V216.39h-20.591v15.184zM121.524 250H75.459a3.97 3.97 0 0 1-3.967-3.967v-8.525a5.941 5.941 0 0 1 5.934-5.934h42.132a5.942 5.942 0 0 1 5.935 5.934v8.525a3.973 3.973 0 0 1-3.969 3.967zm0-4v2-2zm-44.098-10.426a1.936 1.936 0 0 0-1.934 1.934v8.525l46-.033v-8.492a1.937 1.937 0 0 0-1.935-1.934H77.426z"/>
      <path className="st4" d="M110.787 235.574H86.196a2 2 0 0 1-2-2V214.39a2 2 0 0 1 2-2h24.591a2 2 0 0 1 2 2v19.185a2 2 0 0 1-2 1.999zm-22.591-4h20.591V216.39H88.196v15.184zM171.524 216.39h-28.032c-4.357 0-7.902-3.545-7.902-7.901v-6.878a2 2 0 0 1 2-2h39.836a2 2 0 0 1 2 2v6.878c0 4.356-3.545 7.901-7.902 7.901zm-31.934-12.78v4.878a3.906 3.906 0 0 0 3.902 3.901h28.032a3.905 3.905 0 0 0 3.901-3.901v-4.878H139.59z"/>
      <path className="st4" d="M112.508 216.39H84.476c-4.356 0-7.901-3.545-7.901-7.901v-6.878a2 2 0 0 1 2-2h39.836a2 2 0 0 1 2 2v6.878c-.001 4.356-3.546 7.901-7.903 7.901zm-31.934-12.78v4.878a3.905 3.905 0 0 0 3.901 3.901h28.032a3.906 3.906 0 0 0 3.902-3.901v-4.878H80.574zM163.745 153.524H92.254a6.927 6.927 0 0 1-6.918-6.918v-25.901a6.927 6.927 0 0 1 6.918-6.918h71.491a6.927 6.927 0 0 1 6.918 6.918v25.901a6.925 6.925 0 0 1-6.918 6.918zm-71.491-35.737a2.921 2.921 0 0 0-2.918 2.918v25.901a2.921 2.921 0 0 0 2.918 2.918h71.491a2.921 2.921 0 0 0 2.918-2.918v-25.901a2.921 2.921 0 0 0-2.918-2.918H92.254z"/>
      
      {/* Animated Error Text - perfectly centered on the chest panel */}
      <motion.text
        x={TEXT_POSITION.x}
        y={TEXT_POSITION.y}
        dominantBaseline="middle"
        textAnchor="middle"
        className={textClassName || "error-text"}
        style={{ 
          fontSize: `${CHEST_PANEL.height * 0.6}px`, // Font size relative to panel height
          fontFamily: 'system-ui, -apple-system, sans-serif', 
          fontWeight: 'bold',
          fill: '#ffffff'
        }}
        {...animationProps}
      >
        {errorText}
      </motion.text>
    </svg>
  );
}